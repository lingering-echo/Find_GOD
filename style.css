/* リセット＆基本設定 */
* { margin:0; padding:0; box-sizing:border-box; }
html, body {
  height:100%;
  overflow:hidden;
  background:#000; /* PC余白も黒で統一 */
  font-family:'Noto Sans JP', sans-serif;
}
body {
  display:flex;
  align-items:center;
  justify-content:center;
}

/* ゲーム画面：スマホサイズ固定（9:16縦長）で中央配置 */
.screen {
  position:relative;
  width:360px;              /* スマホ幅基準（360px標準） */
  height:640px;             /* 9:16比率（360*1.777... ≈640） */
  max-width:90vw;           /* 小さい画面でも収まる */
  max-height:90vh;
  background:#000;
  display:none;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  box-shadow:0 0 50px rgba(0,0,0,0.8); /* PCで浮き出る影追加 */
  border-radius:20px;       /* スマホ風角丸 */
  overflow:hidden;
}
.screen.active { display:flex; }

/* 背景画像 */
.bg {
  position:absolute;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:-1;
}

/* カウントダウン画面背景非表示（シンプル黒） */
#intro .bg, #nextStage .bg { display:none !important; }
#intro, #nextStage { background:#000 !important; }

/* スタートボタン */
.big-btn {
  padding:16px 32px;
  font-size:28px;           /* 固定サイズで安定 */
  background:#ffeb3b;
  color:black;
  border:none;
  border-radius:20px;
  box-shadow:0 10px 0 #c8b900;
  margin-top:180px;         /* さらに下げてバランス調整 */
  cursor:pointer;
  font-weight:900;
  white-space:nowrap;
  text-align:center;
  min-width:240px;
}
.big-btn:active { transform:translateY(10px); box-shadow:0 0 0 #c8b900; }

/* X共有ボタン同一スタイル */
.share-btn {
  background:#1da1f2 !important;
  color:white !important;
  box-shadow:0 10px 0 #0d8bd9 !important;
}
.share-btn:active { box-shadow:0 0 0 #0d8bd9 !important; }

/* メッセージ */
.message {
  font-size:32px;
  color:white;
  text-shadow:4px 4px 10px black;
  font-weight:900;
  text-align:center;
  margin-bottom:80px;
  line-height:1.5;
  white-space:pre-line;
}

/* カウントダウン数字 */
.countdown {
  font-size:180px;
  color:#ffeb3b;
  font-weight:900;
  text-shadow:0 0 30px #ffeb3b;
  animation:pulse 1.2s infinite;
}
@keyframes pulse {
  0%,100% { transform:scale(1); }
  50% { transform:scale(1.1); }
}

/* タイマー・ステージ表示 */
#timer, #stage {
  position:absolute;
  font-size:26px;
  color:white;
  background:rgba(0,0,0,0.6);
  padding:8px 16px;
  border-radius:12px;
  font-weight:bold;
  z-index:10;
}
#timer { top:15px; right:15px; }
#stage { top:15px; left:15px; }

/* グリッド */
#grid {
  display:grid;
  gap:6px;
  padding:10px;
  width:340px;
  height:400px;             /* 固定で安定 */
  justify-content:center;
  align-content:center;
}

/* セル */
.cell {
  background:rgba(255,255,255,0.95);
  border-radius:12px;
  font-size:60px;
  font-weight:900;
  display:flex;
  align-items:center;
  justify-content:center;
  aspect-ratio:1/1;
  user-select:none;
  box-shadow:0 8px 0 rgba(0,0,0,0.2);
  transition:all 0.1s;
}
.cell:active { transform:translateY(8px); box-shadow:0 0 0 rgba(0,0,0,0.2); }

/* 不正解テキスト */
.wrong-text {
  position:absolute;
  top:50%; left:50%;
  transform:translate(-50%,-50%);
  font-size:100px;
  color:#ff0044;
  font-weight:900;
  text-shadow:0 0 35px black;
  opacity:0;
  pointer-events:none;
  white-space:nowrap;
  letter-spacing:15px;
}

/* 神ポップアップ */
.god-pop {
  position:absolute;
  top:0; left:0;
  width:100%; height:100%;
  background:rgba(0,0,0,0.8);
  display:none;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  z-index:100;
}
.god-text {
  font-size:300px;
  color:#ffeb3b;
  text-shadow:0 0 50px #fff, 0 0 100px #ff0;
  animation:godGlow 1.5s ease-out;
}
.sparkle {
  position:absolute;
  font-size:90px;
  animation:sparkleAnim 1.5s ease-out forwards;
  pointer-events:none;
}
@keyframes godGlow {
  0% { transform:scale(0); opacity:0; }
  70% { transform:scale(1.2); }
  100% { transform:scale(1); opacity:1; }
}
@keyframes sparkleAnim {
  0% { opacity:1; transform:translate(0,0) rotate(0); }
  100% { opacity:0; transform:translate(var(--x),var(--y)) rotate(360deg); }
}

/* リザルト画面：固定サイズで安定・中央揃え */
.result-box {
  text-align:center;
  color:white;
  text-shadow:4px 4px 10px black;
  padding:20px;
  width:100%;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
}
.result-box h1 {
  font-size:100px;
  margin:20px 0;
  white-space:nowrap;
}
.result-box h1[data-rank="ワンヘッド"],
.result-box h1[data-rank="ハーフライフ"] {
  font-size:70px !important;   /* 長いランクは小さく */
}
.result-time {
  font-size:50px;
  margin:30px 0;
  white-space:nowrap;
}